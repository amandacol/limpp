<div class="container-fluid mt-5">
  <style>
    .font{
      color: #707070;
      font-family: 'Montserrat', sans-serif;
      font-size: 14px;
      margin-left: -64px;
      height: 84px;
      width:180px;
    }
    .fonttitle{
      color: #707070;
      font-family: 'Montserrat', sans-serif;
      font-size: 14px;
    }
    .desconto{
      width: 35px;
      height: 35px;
    }
    .btn-cadastrar{
      color: white;
      background-color: #333132;
      border-radius: 30px;
      padding: 0.3rem 1rem;
      font-weight: bold;
      font-family: 'Montserrat', sans-serif;
      font-size: 13px;
      box-shadow: 0px 2px 2px #33313261;
    }
    p{
    color: #707070;
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
    text-decoration: none;
    }
    .verde{
      color: #57B675;
      font-family: 'Montserrat', sans-serif;
      font-size: 14px;

    }
    .amarelo{
      color: #FABA02;
      font-family: 'Montserrat', sans-serif;
      font-size: 14px;
    }
    .vermelho{
      color: #D93500;
      font-family: 'Montserrat', sans-serif;
      font-size: 14px;
    }
    .position{
      margin-left: -10px;
    }
    .space{
      position: absolute;
      bottom: 0px;
      right: 17px;
    }
    .card-body{
      padding: 0.7rem;
    }
    .notavailable{
      color: #707070;
      font-family: 'Montserrat', sans-serif;
      font-size: 12px !important;
      margin-left: -64px;
      position: absolute;
      top: 76px;
      left: 162px;
      color: #67D89E;
      font-size: 14px;
      font-weight: bold;
    }
    .case{
      position: absolute;
      bottom: -2px;
      left: 162px;
    }
    .star{
      color: #33D89E;
      width: 10px;
    }
    .nav-link{
    display: block;
    padding: 0.5rem 0.6rem !important;
}
    .ingredient{
      color:#707070;
      background-color: white;
    }
    .sizelogo{
      width: 40px;
      margin-left: 9px;
      margin-bottom: -10px;
    }
    .colorstar{
      color: #33D89E;
    }
    .active{
      background-color: #F2F2F2 !important;
      border: none;
      border-radius: 8px;
      color: #333132 !important;
      font-family: 'Montserrat', sans-serif;
      font-weight: bold;
      font-size: 14px;
      padding: 30px;
    }
    .show {
      background: #F2F2F2 !important;
      border: none;
      color: #333132 !important;
      font-family: 'Montserrat', sans-serif;

    }
    .nav-link{
      color: white;
      font-family: 'Montserrat', sans-serif;
    }
    .nav-item{
      background-image: linear-gradient(#66D8A0, #8D8BDB);
      color: #333132 !important;
      font-family: 'Montserrat', sans-serif;
      border-radius: 23px;
      border-color: white;
      font-weight: bold;
      font-size: 14px;
    }
    .ingredientname{
      background-color: white;
      border-radius: 23px;
      color: #707070;
      padding: 8px;
      padding-right: 45px;
      font-size: 13px;
    }
    .evaluation{
      font-size: 30px;
      font-family: 'Montserrat', sans-serif;
      color: #333132 !important;
    }
    .shadowcss{
      box-shadow: 2px 2px 4px #D6D6D6;
    }
    .fonthumb{
      color: #33D89E;
      font-family: 'Montserrat', sans-serif;
      font-size: 20px;
      padding: 8px;
      white-space: nowrap;
    }
    .number{
      color: #33D89E;
      font-size: 25px;
      margin-top: -7px;
    }
    .dotgreen2 {
    height: 20px;
    width: 20px;
    background-color: #00B576;
    border-radius: 50%;
    display: inline-block;
    margin-top: -20px;
    margin-right: 10px;
  }
    .bigdotgreen {
    height: 30px;
    width: 30px;
    background-color: #00B576;
    border-radius: 50%;
    display: inline-block;
    margin-bottom: -35px;
  }
  .bigdotyellow{
    height: 30px;
    width: 30px;
    background-color: #FFBA00;
    border-radius: 50%;
    display: inline-block;
    margin-bottom: -35px;
  }
  .bigdotred{
    height: 30px;
    width: 30px;
    background-color: #D80303;
    border-radius: 50%;
    display: inline-block;
    margin-bottom: -35px;
  }
  .bigdotgrey{
    height: 30px;
    width: 30px;
    background-color: #8391B5;
    border-radius: 50%;
    display: inline-block;
    margin-bottom: -35px;
  }
  .potencialnao2{
    background-color: #00B576;
    border-radius: 30px;
    display: inline-block;
    margin-left: -2px;
    margin-top: -10px;
    color: white;
    font-family: 'Montserrat', sans-serif;
    font-size: 13px;
    font-weight: bold;
    padding: 0.2rem 0.6rem;
  }
  .marginhealth2{
    margin-bottom: 18px;
  }
   .marginrisk{
    margin-left: 15px;
    color: #707070;
    font-family: 'Montserrat', sans-serif;
    font-size: 13px;
    font-weight: bold;
    margin-top: 15px;
  }
  .criterios{
    color: #00B576;
    font-family: 'Montserrat', sans-serif;
    font-weight: bold;
    font-size: 14px;
    margin-left: 50px;
  }
  .criteriosyellow{
    color: #FFBA00;
    font-family: 'Montserrat', sans-serif;
    font-weight: bold;
    font-size: 14px;
    margin-left: 50px;
  }
  .criteriosred{
    color: #D80303;
    font-family: 'Montserrat', sans-serif;
    font-weight: bold;
    font-size: 14px;
    margin-left: 50px;
  }
  .criteriosgrey{
    color: #8391B5;
    font-family: 'Montserrat', sans-serif;
    font-weight: bold;
    font-size: 14px;
    margin-left: 50px;
  }
  .criterioscinza{
    color: #707070;
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
    margin-left: 50px;
    margin-bottom: -10px;
  }
  .purpleheart{
      width: 20px;
      margin-bottom: 10px;
    }
    .greyheart{
      width: 30px;
      margin-left: 5px;
    }
  </style>

<div class="container p-1">
  <div class="card shadow-sm bg-white mt-3" style="width: 20rem; border-radius: 8px; ">
     <div class="card-body d-flex justify-content-start">
       <div class="d-flex align-items-end position">
       <% if @item.photo.attached? %>
        <%= cl_image_tag @item.photo.key, width: 80, height: 80, crop: :fill, class:"shadowcss bg-white rounded" %>
       <% else %>
        <img src="https://images.unsplash.com/photo-1503236823255-94609f598e71?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80" class="card-photo"/>
       <% end %>
       <% if @item.reviews.empty? %>
          <p class="card-text notavailable"><%= "Não avaliado ainda" %></p>
          <% else %>
          <% @item.calculate_average.times do %>
            <i class="fas fa-star star ml-2"></i>
          <% end %>
       <% end %>
       </div>
       <p class="card-text font case"><%= @item.name %></p>
       <div class="d-flex justify-content-end space">
          <% if @item.coupons.exists? %>
          <%= link_to item_coupons_path(@item) do %>
            <%= image_tag "desconto2.png", class:"desconto mb-2" %>
          <% end %>
          <% end %>
            <% if @item.wishlists.any? %>
            <%= image_tag("purpleheart.svg", class: 'purpleheart ml-2') %>
            <% else %>
          <%= simple_form_for [@item, Wishlist.new] do |s|  %>
            <%= image_submit_tag("heart.png", class: 'greyheart') %>
        <% end %>
        <% end %>
       </div>
     </div>
  </div>

  <ul class="nav nav-pills mt-3" id="pills-tab" role="tablist">
  <li class="nav-item" role="presentation">
    <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Ingredientes</a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Certificações</a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Avaliações</a>
  </li>
</ul>
<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
  <div class="d-flex align-items-center">
    <div class="d-flex ingredientname">
  <% if @item.combinations.any? %>
        <ul>
        <% @item.combinations.each do |combination| %>
        <li class="mt-2 mb-2"><%= link_to combination.ingredient.name, ingredient_path(combination.ingredient) %></li>
      <div class="d-flex">
        <div>
        <%= image_tag "saude.svg", class:"marginhealth2" %>
        <span class="dotgreen2"></span>
        </div>
        <div>
        <%= image_tag "ambiente.svg", class:"marginhealth2" %>
        <span class="dotgreen2"></span>
        </div>
        <div>
        <%= image_tag "alergia.svg", class:"marginhealth2" %>
        <p class="potencialnao2">NÃO</p>
        </div>
      </div>
        <% end %>
        </ul>
     <% else %>
        <p class="card-text ingredientname"><%= 'Esse item não contém ingredientes tóxicos avaliados pelo limpp' %></p>
  <% end %>
    </div>
  </div>
  </div>
  <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
     <% if @item.certification_photos.attached? %>
      <% @item.certification_photos.each do |photo| %>
       <%= cl_image_tag photo.key, width: 80, height: 80, crop: :fill, class:"shadowcss bg-white rounded" %>
       <% end %>
     <% else %>
        <p class="card-text ingredientname"><%= 'Esse item não tem certificados aprovados pelo limpp' %></p>
     <% end %>
  </div>
  <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
    <div class="d-flex">
    <% if @item.reviews.empty? %>
      <br><%=    link_to 'Seja o primeiro a avaliar esse produto', new_item_review_path(@item.id), class: "btn btn-cadastrar mt-1" %>
    <% else %>
    <p class="mr-1">Média geral</p>
    <p class="number ml-3"><%= @item.calculate_average %></p>
    <p class="ml-3 mr-1">de</p><p class="ml-1 font-weight-bold"><%= @item.reviews.count %></p> <p class="ml-2">Avaliação(ões)</p>
    </div>
    <% if @item.reviews.exists? %>
    <% @yes = (@item.reviews.where(buyagain: 1).count * 100.0 / @item.reviews.count).round(0) %>
    <% @no = (@item.reviews.where(buyagain: 0).count * 100.0 / @item.reviews.count).round(0) %>
    <% if @yes >= @no %>
      <div class="d-flex align-items-center">
       <span class="likeitem fonthumb"><i class="far fa-thumbs-up"><%= @yes %>%</i></span><p class="flex-nowrap mt-4">Comprariam novamente</p>
      </div>
    <% else %>
      <div class="d-flex align-items-center">
       <span class="dislikeitem fonthumb"><i class="far fa-thumbs-down"><%= @no %>%</i></span><p class="flex-nowrap mt-3">Não comprariam novamente</p>
      </div>
    <% end %>
    <% end %>
    <br><%=    link_to 'Clique para avaliar esse produto', new_item_review_path(@item.id), class: "btn btn-cadastrar mt-1" %>
    <% end %>
</div>
</div>


  <div class="d-flex"><p class="fonttitle mt-4">Aspectos avaliados pelo</p><%= image_tag "logolimpp.svg" , class:"sizelogo" %> </div>
    <div class="d-flex">
    <%= image_tag "saude.svg", class:"marginhealth" %>
    <p class="marginrisk">Risco à saúde</p>
    </div>
    <div class="d-flex">
    <%= image_tag "ambiente.svg", class:"marginhealth" %>
    <p class="marginrisk">Risco ao meio ambiente</p>
    </div>
    <div class="d-flex">
    <%= image_tag "alergia.svg", class:"marginhealth" %>
    <p class="marginrisk">Potencial alegênico</p>
    </div>

<div class="d-flex"><p class="fonttitle mt-4">Critérios de avaliação</p><%= image_tag "logolimpp.svg" , class:"sizelogo" %> </div>
    <span class="bigdotgreen"></span>
    <p class="criterios"> Seguro em cosméticos </p>
    <p class="criterioscinza"> É seguro em cosméticos sem restrições e sem causar impactos a saúde e/ou ao meio ambiente.</p>
<span class="bigdotyellow"></span>
    <p class="criteriosyellow"> Seguro em cosméticos, com restrições  </p>
    <p class="criterioscinza"> É seguro em cosméticos com restrições e podem causar impactos a saúde e/ou ao meio ambiente.</p>
<span class="bigdotred"></span>
    <p class="criteriosred"> Inseguro em cosméticos </p>
    <p class="criterioscinza"> Não são seguros em cosméticos e podem causar impactos graves a saúde e/ou ao meio ambiente.</p>
<span class="bigdotgrey"></span>
    <p class="criteriosgrey"> Potencial inconclusivo   </p>
    <p class="criterioscinza"> Estudos não permitem nenhuma conclusão por estarem em andamento ou obterem dados divergentes sobre sua segurança a saúde e/ou impactos ao meio ambiente.</p>
</div>
